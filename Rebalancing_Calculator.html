<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>SOXL-VXX ë¦¬ë°¸ëŸ°ì‹± ê³„ì‚°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #00b894 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
        @media screen and (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .header p {
                font-size: 0.9em;
            }
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .calculator {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
        }
        
        /* ëª¨ë°”ì¼ íƒ­ */
        @media screen and (max-width: 768px) {
            .tab {
                padding: 12px 8px;
                font-size: 0.85em;
            }
        }
        
        @media screen and (max-width: 480px) {
            .tab {
                padding: 10px 5px;
                font-size: 0.75em;
            }
        }
        
        .tab:hover {
            background: #e9ecef;
            color: #333;
        }
        
        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ëª¨ë°”ì¼ íƒ­ ì»¨í…ì¸  */
        @media screen and (max-width: 768px) {
            .tab-content {
                padding: 20px 15px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .tab-content {
                padding: 15px 10px;
            }
        }
        
        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        /* ëª¨ë°”ì¼ ì…ë ¥ ê·¸ë£¹ */
        @media screen and (max-width: 768px) {
            .input-group {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
        
        .input-field {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .input-field label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }
        
        .input-field input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }
        
        .stock-section {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid transparent;
        }
        
        .soxl-section {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-color: #28a745;
        }
        
        .vxx-section {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border-color: #dc3545;
        }
        
        .stock-section h4 {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .stock-section .input-field {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .stock-section .input-field input {
            background: white;
            border: 1px solid #ccc;
        }
        
        .stock-section .input-field input:focus {
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
        }
        
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background 0.3s;
            margin: 5px;
        }
        
        /* ëª¨ë°”ì¼ ë²„íŠ¼ */
        @media screen and (max-width: 768px) {
            .btn {
                padding: 10px 20px;
                font-size: 0.9em;
                margin: 3px;
                width: 100%;
                max-width: 200px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .btn {
                padding: 8px 16px;
                font-size: 0.85em;
            }
        }
        
        .btn:hover {
            background: #5a6fd8;
        }
        
        .btn.secondary {
            background: #6c757d;
        }
        
        .btn.secondary:hover {
            background: #5a6268;
        }
        
        .result-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .result-card .label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .result-card .value {
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .portfolio-summary {
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
        }
        
        .summary-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px 40px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .summary-card .label {
            font-size: 1em;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .summary-card .value {
            font-size: 2.5em;
            font-weight: bold;
        }
        
        .portfolio-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        /* ëª¨ë°”ì¼ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„¸ */
        @media screen and (max-width: 768px) {
            .portfolio-details {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
        
        .stock-detail-card {
            padding: 20px;
            border-radius: 10px;
            border: 2px solid transparent;
        }
        
        .soxl-detail {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        
        .vxx-detail {
            background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        /* ëª¨ë°”ì¼ ìƒì„¸ ê·¸ë¦¬ë“œ */
        @media screen and (max-width: 480px) {
            .detail-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
        
        .detail-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .detail-label {
            font-size: 0.85em;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 1.2em;
            font-weight: bold;
            color: white;
        }
        
        .adjustment-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .adjustment-section h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .adjustment-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #ffeaa7;
        }
        
        .adjustment-item:last-child {
            border-bottom: none;
        }
        
        .adjustment-item .action {
            font-weight: 600;
        }
        
        .adjustment-item .amount {
            font-weight: bold;
            color: #856404;
        }
        
        .history-section {
            margin-top: 30px;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }
        
        /* ëª¨ë°”ì¼ í…Œì´ë¸” */
        @media screen and (max-width: 768px) {
            .history-table {
                font-size: 0.75em;
            }
            
            .history-table th,
            .history-table td {
                padding: 8px 4px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .history-table {
                font-size: 0.7em;
            }
            
            .history-table th,
            .history-table td {
                padding: 6px 3px;
            }
        }
        
        .history-table th,
        .history-table td {
            padding: 10px 8px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
            border-right: 1px solid #dee2e6;
        }
        
        .history-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }
        
        .history-table th:last-child,
        .history-table td:last-child {
            border-right: none;
        }
        
        .history-table tr:hover {
            background: #f8f9fa;
        }
        
        .history-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .history-table tr:nth-child(even):hover {
            background-color: #e9ecef;
        }
        
        .performance-chart {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        /* ëª¨ë°”ì¼ ì°¨íŠ¸ */
        @media screen and (max-width: 768px) {
            .performance-chart {
                padding: 15px;
            }
            
            #performanceChart {
                width: 100% !important;
                height: 300px !important;
            }
        }
        
        @media screen and (max-width: 480px) {
            .performance-chart {
                padding: 10px;
            }
            
            #performanceChart {
                height: 250px !important;
            }
        }
        
        .target-ratios {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .target-ratios h3 {
            color: #2d5a2d;
            margin-bottom: 15px;
        }
        
        .ratio-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 15px;
        }
        
        /* ëª¨ë°”ì¼ ë¹„ìœ¨ ì»¨íŠ¸ë¡¤ */
        @media screen and (max-width: 768px) {
            .ratio-controls {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
        
        .ratio-control-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #c3e6c3;
        }
        
        .ratio-control-item label {
            display: block;
            font-weight: 600;
            color: #2d5a2d;
            margin-bottom: 10px;
        }
        
        .ratio-slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .ratio-slider {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(to right, #28a745 0%, #20c997 50%, #28a745 100%);
            outline: none;
            -webkit-appearance: none;
        }
        
        .ratio-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #28a745;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .ratio-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #28a745;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .ratio-display-value {
            font-size: 1.3em;
            font-weight: bold;
            color: #28a745;
            min-width: 50px;
            text-align: center;
        }
        
        .ratio-summary {
            display: flex;
            justify-content: space-around;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #c3e6c3;
        }
        
        /* ëª¨ë°”ì¼ ë¹„ìœ¨ ìš”ì•½ */
        @media screen and (max-width: 768px) {
            .ratio-summary {
                flex-direction: column;
                gap: 8px;
            }
        }
        
        .ratio-summary-item {
            text-align: center;
            padding: 10px 20px;
            background: white;
            border-radius: 5px;
            border: 1px solid #c3e6c3;
            flex: 1;
        }
        
        .ratio-summary-item.total {
            background: #2d5a2d;
            color: white;
            border: none;
        }
        
        .ratio-summary-item strong {
            font-size: 1.2em;
            color: #2d5a2d;
        }
        
        .ratio-summary-item.total strong {
            color: white;
        }
        
        .month-selector {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .month-selector select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            margin: 0 10px;
        }
        
        /* ëª¨ë°”ì¼ ì„ íƒê¸° */
        @media screen and (max-width: 768px) {
            .month-selector {
                padding: 12px;
            }
            
            .month-selector select {
                padding: 10px 8px;
                font-size: 0.9em;
                margin: 5px;
                width: 100%;
                max-width: 150px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .month-selector select {
                font-size: 0.85em;
                padding: 8px 6px;
            }
        }
        
        .clear-btn {
            background: #dc3545;
        }
        
        .clear-btn:hover {
            background: #c82333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SOXL-VXX ë¦¬ë°¸ëŸ°ì‹± ê³„ì‚°ê¸°</h1>
            <p>ëª©í‘œ ë¹„ìœ¨ 75% SOXL, 25% VXX ë‹¬ì„±ì„ ìœ„í•œ íˆ¬ì ì¡°ì • ê³„ì‚°ê¸°</p>
        </div>

        <div class="calculator">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('calculator')">ğŸ“Š ê³„ì‚°ê¸°</button>
                <button class="tab" onclick="switchTab('history')">ğŸ“ˆ íˆ¬ì íˆìŠ¤í† ë¦¬</button>
                <button class="tab" onclick="switchTab('performance')">ğŸ“Š ì„±ê³¼ ë¶„ì„</button>
            </div>

            <!-- ê³„ì‚°ê¸° íƒ­ -->
            <div id="calculator" class="tab-content active">
                <div class="target-ratios">
                    <h3>ğŸ¯ ëª©í‘œ í¬íŠ¸í´ë¦¬ì˜¤ ë¹„ìœ¨ ì„¤ì •</h3>
                    <div class="ratio-controls">
                        <div class="ratio-control-item">
                            <label for="soxlRatio">SOXL ë¹„ìœ¨:</label>
                            <div class="ratio-slider-container">
                                <input type="range" id="soxlRatio" min="0" max="100" value="75" step="5" 
                                       oninput="updateRatioDisplay()" class="ratio-slider">
                                <span id="soxlRatioDisplay" class="ratio-display-value">75%</span>
                            </div>
                        </div>
                        <div class="ratio-control-item">
                            <label for="vxxRatio">VXX ë¹„ìœ¨:</label>
                            <div class="ratio-slider-container">
                                <input type="range" id="vxxRatio" min="0" max="100" value="25" step="5" 
                                       oninput="updateRatioDisplay()" class="ratio-slider">
                                <span id="vxxRatioDisplay" class="ratio-display-value">25%</span>
                            </div>
                        </div>
                    </div>
                    <div class="ratio-summary">
                        <div class="ratio-summary-item">
                            <span>SOXL: <strong id="summarySoxlRatio">75%</strong></span>
                        </div>
                        <div class="ratio-summary-item">
                            <span>VXX: <strong id="summaryVxxRatio">25%</strong></span>
                        </div>
                        <div class="ratio-summary-item total">
                            <span>ì´í•©: <strong id="totalRatio">100%</strong></span>
                        </div>
                    </div>
                </div>

                <div class="month-selector">
                    <label for="yearSelect">ğŸ“… íˆ¬ì ê¸°ê°„ ì„ íƒ:</label>
                    <select id="yearSelect" onchange="updateYearMonth()">
                        <option value="2024">2024ë…„</option>
                        <option value="2025" selected>2025ë…„</option>
                        <option value="2026">2026ë…„</option>
                        <option value="2027">2027ë…„</option>
                    </select>
                    <select id="monthSelect" onchange="updateYearMonth()">
                        <option value="1">1ì›”</option>
                        <option value="2">2ì›”</option>
                        <option value="3">3ì›”</option>
                        <option value="4">4ì›”</option>
                        <option value="5">5ì›”</option>
                        <option value="6">6ì›”</option>
                        <option value="7">7ì›”</option>
                        <option value="8">8ì›”</option>
                        <option value="9">9ì›”</option>
                        <option value="10">10ì›”</option>
                        <option value="11">11ì›”</option>
                        <option value="12">12ì›”</option>
                    </select>
                    <button class="btn clear-btn" onclick="clearCurrentMonth()">í˜„ì¬ ê¸°ê°„ ì´ˆê¸°í™”</button>
                    <button class="btn secondary" onclick="saveCurrentData()">ğŸ’¾ ìˆ˜ì • ì €ì¥</button>
                </div>

                <div class="input-section">
                    <h3>ğŸ“Š í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ì…ë ¥</h3>
                    
                    <!-- SOXL ì„¹ì…˜ -->
                    <div class="stock-section soxl-section">
                        <h4 style="color: #28a745; margin-bottom: 15px; font-size: 1.2em;">ğŸ“ˆ SOXL (<span id="soxlTargetLabel">75%</span> ëª©í‘œ)</h4>
                        <div class="input-group">
                            <div class="input-field">
                                <label for="soxlPrice">í˜„ì¬ ê°€ê²© ($)</label>
                                <input type="number" id="soxlPrice" step="0.01" placeholder="ì˜ˆ: 27.95">
                            </div>
                            <div class="input-field">
                                <label for="soxlShares">ë³´ìœ  ì£¼ì‹ ìˆ˜</label>
                                <input type="number" id="soxlShares" step="0.01" placeholder="ì˜ˆ: 268.37">
                            </div>
                        </div>
                    </div>
                    
                    <!-- VXX ì„¹ì…˜ -->
                    <div class="stock-section vxx-section">
                        <h4 style="color: #dc3545; margin-bottom: 15px; font-size: 1.2em;">ğŸ“‰ VXX (<span id="vxxTargetLabel">25%</span> ëª©í‘œ)</h4>
                        <div class="input-group">
                            <div class="input-field">
                                <label for="vxxPrice">í˜„ì¬ ê°€ê²© ($)</label>
                                <input type="number" id="vxxPrice" step="0.01" placeholder="ì˜ˆ: 45.10">
                            </div>
                            <div class="input-field">
                                <label for="vxxShares">ë³´ìœ  ì£¼ì‹ ìˆ˜</label>
                                <input type="number" id="vxxShares" step="0.01" placeholder="ì˜ˆ: 55.43">
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn" onclick="calculateRebalancing()">ğŸ”„ ë¦¬ë°¸ëŸ°ì‹± ê³„ì‚°</button>
                    </div>
                </div>

                <div id="results" style="display: none;">
                    <div class="result-section">
                        <h3>ğŸ“ˆ í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ í˜„í™©</h3>
                        
                        <!-- ì´ í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ -->
                        <div class="portfolio-summary">
                            <div class="summary-card">
                                <div class="label">ì´ í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜</div>
                                <div class="value" id="totalValue">$0</div>
                            </div>
                        </div>
                        
                        <!-- ì¢…ëª©ë³„ ìƒì„¸ ì •ë³´ -->
                        <div class="portfolio-details">
                            <!-- SOXL ì„¹ì…˜ -->
                            <div class="stock-detail-card soxl-detail">
                                <h4 style="color: white; margin-bottom: 15px; font-size: 1.1em;">ğŸ“ˆ SOXL</h4>
                                <div class="detail-grid">
                                    <div class="detail-item">
                                        <div class="detail-label">í˜„ì¬ ê°€ê²©</div>
                                        <div class="detail-value" id="soxlPriceDisplay">$0</div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-label">ë³´ìœ  ì£¼ì‹ ìˆ˜</div>
                                        <div class="detail-value" id="soxlSharesDisplay">0</div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-label">ì´ ê°€ì¹˜</div>
                                        <div class="detail-value" id="soxlValue">$0</div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-label">í˜„ì¬ ë¹„ìœ¨</div>
                                        <div class="detail-value" id="currentSoxlRatio">0%</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- VXX ì„¹ì…˜ -->
                            <div class="stock-detail-card vxx-detail">
                                <h4 style="color: white; margin-bottom: 15px; font-size: 1.1em;">ğŸ“‰ VXX</h4>
                                <div class="detail-grid">
                                    <div class="detail-item">
                                        <div class="detail-label">í˜„ì¬ ê°€ê²©</div>
                                        <div class="detail-value" id="vxxPriceDisplay">$0</div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-label">ë³´ìœ  ì£¼ì‹ ìˆ˜</div>
                                        <div class="detail-value" id="vxxSharesDisplay">0</div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-label">ì´ ê°€ì¹˜</div>
                                        <div class="detail-value" id="vxxValue">$0</div>
                                    </div>
                                    <div class="detail-item">
                                        <div class="detail-label">í˜„ì¬ ë¹„ìœ¨</div>
                                        <div class="detail-value" id="currentVxxRatio">0%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="adjustment-section">
                        <h3>âš–ï¸ ë¦¬ë°¸ëŸ°ì‹± ì¡°ì • ë°©ì•ˆ</h3>
                        <div id="adjustmentDetails"></div>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn" onclick="saveRebalancing()">ğŸ’¾ ë¦¬ë°¸ëŸ°ì‹± ì €ì¥</button>
                        <button class="btn secondary" onclick="resetCalculator()">ğŸ”„ ì´ˆê¸°í™”</button>
                    </div>
                </div>
            </div>

            <!-- íˆ¬ì íˆìŠ¤í† ë¦¬ íƒ­ -->
            <div id="history" class="tab-content">
                <div class="history-section">
                    <h3>ğŸ“ˆ ì›”ë³„ íˆ¬ì íˆìŠ¤í† ë¦¬</h3>
                    <table class="history-table" id="historyTable">
                        <thead>
                            <tr>
                                <th rowspan="2">ë…„ë„</th>
                                <th rowspan="2">ì›”</th>
                                <th colspan="2" style="text-align: center; background-color: #28a745; color: white;">SOXL</th>
                                <th colspan="2" style="text-align: center; background-color: #dc3545; color: white;">VXX</th>
                                <th rowspan="2">ì´ ê°€ì¹˜</th>
                                <th rowspan="2">SOXL ë¹„ìœ¨</th>
                                <th rowspan="2">VXX ë¹„ìœ¨</th>
                                <th rowspan="2">ì›”ê°„ ìˆ˜ìµë¥ </th>
                            </tr>
                            <tr>
                                <th style="background-color: #d4edda;">ê°€ê²© ($)</th>
                                <th style="background-color: #d4edda;">ì£¼ì‹ ìˆ˜</th>
                                <th style="background-color: #f8d7da;">ê°€ê²© ($)</th>
                                <th style="background-color: #f8d7da;">ì£¼ì‹ ìˆ˜</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ì„±ê³¼ ë¶„ì„ íƒ­ -->
            <div id="performance" class="tab-content">
                <div class="performance-chart">
                    <h3>ğŸ“Š ëˆ„ì  ìˆ˜ìµë¥  ë¶„ì„</h3>
                    <canvas id="performanceChart" width="800" height="400"></canvas>
                </div>
                
                <div class="result-grid" style="margin-top: 30px;">
                    <div class="result-card">
                        <div class="label">ì´ íˆ¬ì ê¸°ê°„</div>
                        <div class="value" id="totalPeriod">0ê°œì›”</div>
                    </div>
                    <div class="result-card">
                        <div class="label">ì´ ìˆ˜ìµë¥ </div>
                        <div class="value" id="totalReturn">0%</div>
                    </div>
                    <div class="result-card">
                        <div class="label">ì—°ê°„ ìˆ˜ìµë¥ </div>
                        <div class="value" id="annualReturn">0%</div>
                    </div>
                    <div class="result-card">
                        <div class="label">ìµœëŒ€ ë‚™í­</div>
                        <div class="value" id="maxDrawdown">0%</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ì „ì—­ ë³€ìˆ˜
        let investmentHistory = [];
        let currentYear = 2025;
        let currentMonth = 1;
        let performanceChart = null;
        let targetSoxlRatio = 75;
        let targetVxxRatio = 25;

        // ë…„ë„/ì›”ë³„ ë°ì´í„° ì €ì¥ì†Œ
        const monthlyData = {};

        function updateRatioDisplay() {
            targetSoxlRatio = parseInt(document.getElementById('soxlRatio').value);
            targetVxxRatio = parseInt(document.getElementById('vxxRatio').value);
            
            document.getElementById('soxlRatioDisplay').textContent = targetSoxlRatio + '%';
            document.getElementById('vxxRatioDisplay').textContent = targetVxxRatio + '%';
            document.getElementById('summarySoxlRatio').textContent = targetSoxlRatio + '%';
            document.getElementById('summaryVxxRatio').textContent = targetVxxRatio + '%';
            document.getElementById('totalRatio').textContent = (targetSoxlRatio + targetVxxRatio) + '%';
            
            // ì…ë ¥ ì„¹ì…˜ì˜ ëª©í‘œ ë¹„ìœ¨ ë¼ë²¨ ì—…ë°ì´íŠ¸
            document.getElementById('soxlTargetLabel').textContent = targetSoxlRatio + '%';
            document.getElementById('vxxTargetLabel').textContent = targetVxxRatio + '%';
            
            // ì´í•©ì´ 100%ê°€ ì•„ë‹ˆë©´ ê²½ê³  í‘œì‹œ
            const total = targetSoxlRatio + targetVxxRatio;
            const totalElement = document.getElementById('totalRatio');
            if (total !== 100) {
                totalElement.style.color = '#dc3545';
                totalElement.parentElement.style.background = '#f8d7da';
            } else {
                totalElement.style.color = 'white';
                totalElement.parentElement.style.background = '#2d5a2d';
            }
        }

        function switchTab(tabName) {
            // ëª¨ë“  íƒ­ê³¼ ì»¨í…ì¸  ë¹„í™œì„±í™”
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // ì„ íƒëœ íƒ­ê³¼ ì»¨í…ì¸  í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // ì„±ê³¼ ë¶„ì„ íƒ­ì´ í™œì„±í™”ë˜ë©´ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            if (tabName === 'performance') {
                updatePerformanceChart();
            }
        }

        function updateYearMonth() {
            currentYear = parseInt(document.getElementById('yearSelect').value);
            currentMonth = parseInt(document.getElementById('monthSelect').value);
            loadMonthData();
        }

        function loadMonthData() {
            const dataKey = `${currentYear}_${currentMonth}`;
            if (monthlyData[dataKey]) {
                const data = monthlyData[dataKey];
                document.getElementById('soxlPrice').value = data.soxlPrice || '';
                document.getElementById('soxlShares').value = data.soxlShares || '';
                document.getElementById('vxxPrice').value = data.vxxPrice || '';
                document.getElementById('vxxShares').value = data.vxxShares || '';
            } else {
                // ìƒˆ ê¸°ê°„ì´ë©´ ì´ˆê¸°í™”
                document.getElementById('soxlPrice').value = '';
                document.getElementById('soxlShares').value = '';
                document.getElementById('vxxPrice').value = '';
                document.getElementById('vxxShares').value = '';
            }
            // ê²°ê³¼ ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            document.getElementById('results').style.display = 'none';
        }

        function saveMonthData() {
            const dataKey = `${currentYear}_${currentMonth}`;
            monthlyData[dataKey] = {
                year: currentYear,
                month: currentMonth,
                soxlPrice: parseFloat(document.getElementById('soxlPrice').value) || 0,
                soxlShares: parseFloat(document.getElementById('soxlShares').value) || 0,
                vxxPrice: parseFloat(document.getElementById('vxxPrice').value) || 0,
                vxxShares: parseFloat(document.getElementById('vxxShares').value) || 0,
                savedAt: new Date().toISOString()
            };
        }

        function saveCurrentData() {
            // í˜„ì¬ ì…ë ¥ëœ ë°ì´í„°ë¥¼ ì €ì¥
            saveMonthData();
            alert(`${currentYear}ë…„ ${currentMonth}ì›” ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        function clearCurrentMonth() {
            const dataKey = `${currentYear}_${currentMonth}`;
            delete monthlyData[dataKey];
            document.getElementById('soxlPrice').value = '';
            document.getElementById('soxlShares').value = '';
            document.getElementById('vxxPrice').value = '';
            document.getElementById('vxxShares').value = '';
            document.getElementById('results').style.display = 'none';
            alert(`${currentYear}ë…„ ${currentMonth}ì›” ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        function calculateRebalancing() {
            const soxlPrice = parseFloat(document.getElementById('soxlPrice').value) || 0;
            const soxlShares = parseFloat(document.getElementById('soxlShares').value) || 0;
            const vxxPrice = parseFloat(document.getElementById('vxxPrice').value) || 0;
            const vxxShares = parseFloat(document.getElementById('vxxShares').value) || 0;

            if (soxlPrice === 0 || vxxPrice === 0) {
                alert('ëª¨ë“  ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ ê³„ì‚°
            const soxlValue = soxlPrice * soxlShares;
            const vxxValue = vxxPrice * vxxShares;
            const totalValue = soxlValue + vxxValue;

            if (totalValue === 0) {
                alert('ì£¼ì‹ ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // í˜„ì¬ ë¹„ìœ¨ ê³„ì‚°
            const currentSoxlRatio = (soxlValue / totalValue) * 100;
            const currentVxxRatio = (vxxValue / totalValue) * 100;

            // ëª©í‘œ ë¹„ìœ¨ (ì‚¬ìš©ì ì„¤ì •ê°’ ì‚¬ìš©)
            const targetSoxlRatioValue = targetSoxlRatio / 100;
            const targetVxxRatioValue = targetVxxRatio / 100;

            // ëª©í‘œ ê°€ì¹˜ ê³„ì‚°
            const targetSoxlValue = totalValue * targetSoxlRatioValue;
            const targetVxxValue = totalValue * targetVxxRatioValue;

            // ëª©í‘œ ì£¼ì‹ ìˆ˜ ê³„ì‚°
            const targetSoxlShares = targetSoxlValue / soxlPrice;
            const targetVxxShares = targetVxxValue / vxxPrice;

            // ì¡°ì • í•„ìš”ëŸ‰ ê³„ì‚°
            const soxlAdjustment = targetSoxlShares - soxlShares;
            const vxxAdjustment = targetVxxShares - vxxShares;

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('totalValue').textContent = `$${totalValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            
            // SOXL ì •ë³´
            document.getElementById('soxlPriceDisplay').textContent = `$${soxlPrice.toFixed(2)}`;
            document.getElementById('soxlSharesDisplay').textContent = soxlShares.toFixed(2);
            document.getElementById('soxlValue').textContent = `$${soxlValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('currentSoxlRatio').textContent = `${currentSoxlRatio.toFixed(2)}%`;
            
            // VXX ì •ë³´
            document.getElementById('vxxPriceDisplay').textContent = `$${vxxPrice.toFixed(2)}`;
            document.getElementById('vxxSharesDisplay').textContent = vxxShares.toFixed(2);
            document.getElementById('vxxValue').textContent = `$${vxxValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('currentVxxRatio').textContent = `${currentVxxRatio.toFixed(2)}%`;

            // ì¡°ì • ë°©ì•ˆ í‘œì‹œ
            const adjustmentDetails = document.getElementById('adjustmentDetails');
            adjustmentDetails.innerHTML = `
                <div class="adjustment-item">
                    <span class="action">SOXL ì¡°ì •: ${soxlAdjustment >= 0 ? 'ë§¤ìˆ˜' : 'ë§¤ë„'}</span>
                    <span class="amount">${Math.abs(soxlAdjustment).toFixed(2)}ì£¼ ($${Math.abs(soxlAdjustment * soxlPrice).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})})</span>
                </div>
                <div class="adjustment-item">
                    <span class="action">VXX ì¡°ì •: ${vxxAdjustment >= 0 ? 'ë§¤ìˆ˜' : 'ë§¤ë„'}</span>
                    <span class="amount">${Math.abs(vxxAdjustment).toFixed(2)}ì£¼ ($${Math.abs(vxxAdjustment * vxxPrice).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})})</span>
                </div>
                <div class="adjustment-item">
                    <span class="action">ìˆœ ìê¸ˆ íë¦„:</span>
                    <span class="amount">$${(soxlAdjustment * soxlPrice + vxxAdjustment * vxxPrice).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>
                </div>
            `;

            document.getElementById('results').style.display = 'block';
        }

        function saveRebalancing() {
            const soxlPrice = parseFloat(document.getElementById('soxlPrice').value);
            const soxlShares = parseFloat(document.getElementById('soxlShares').value);
            const vxxPrice = parseFloat(document.getElementById('vxxPrice').value);
            const vxxShares = parseFloat(document.getElementById('vxxShares').value);

            // í˜„ì¬ ì›” ë°ì´í„° ì €ì¥
            saveMonthData();

            // ë¦¬ë°¸ëŸ°ì‹± í›„ í¬íŠ¸í´ë¦¬ì˜¤ ê³„ì‚°
            const soxlValue = soxlPrice * soxlShares;
            const vxxValue = vxxPrice * vxxShares;
            const totalValue = soxlValue + vxxValue;

            // ëª©í‘œ ë¹„ìœ¨ë¡œ ì¡°ì •ëœ í¬íŠ¸í´ë¦¬ì˜¤ (ì‚¬ìš©ì ì„¤ì •ê°’ ì‚¬ìš©)
            const targetSoxlRatioValue = targetSoxlRatio / 100;
            const targetVxxRatioValue = targetVxxRatio / 100;
            const targetSoxlValue = totalValue * targetSoxlRatioValue;
            const targetVxxValue = totalValue * targetVxxRatioValue;
            const targetSoxlShares = targetSoxlValue / soxlPrice;
            const targetVxxShares = targetVxxValue / vxxPrice;

            // íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
            const historyEntry = {
                year: currentYear,
                month: currentMonth,
                soxlPrice: soxlPrice,
                soxlShares: targetSoxlShares,
                vxxPrice: vxxPrice,
                vxxShares: targetVxxShares,
                totalValue: totalValue,
                soxlRatio: targetSoxlRatio,
                vxxRatio: targetVxxRatio,
                monthlyReturn: calculateMonthlyReturn()
            };

            investmentHistory.push(historyEntry);
            updateHistoryTable();
            updatePerformanceMetrics();

            alert(`${currentYear}ë…„ ${currentMonth}ì›” ë¦¬ë°¸ëŸ°ì‹±ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        function calculateMonthlyReturn() {
            if (investmentHistory.length === 0) return 0;
            
            const currentValue = parseFloat(document.getElementById('totalValue').textContent.replace(/[$,]/g, ''));
            const lastEntry = investmentHistory[investmentHistory.length - 1];
            const lastValue = lastEntry.totalValue;
            
            return ((currentValue - lastValue) / lastValue) * 100;
        }

        function updateHistoryTable() {
            const tbody = document.getElementById('historyTableBody');
            tbody.innerHTML = '';

            investmentHistory.forEach(entry => {
                const row = tbody.insertRow();
                
                // ë…„ë„
                row.insertCell(0).textContent = `${entry.year}ë…„`;
                row.cells[0].style.fontWeight = 'bold';
                row.cells[0].style.textAlign = 'center';
                row.cells[0].style.backgroundColor = '#e3f2fd';
                
                // ì›”
                row.insertCell(1).textContent = `${entry.month}ì›”`;
                row.cells[1].style.fontWeight = 'bold';
                row.cells[1].style.textAlign = 'center';
                
                // SOXL ê°€ê²©
                const soxlPriceCell = row.insertCell(2);
                soxlPriceCell.textContent = `$${entry.soxlPrice.toFixed(2)}`;
                soxlPriceCell.style.backgroundColor = '#d4edda';
                soxlPriceCell.style.textAlign = 'right';
                soxlPriceCell.style.fontWeight = '600';
                
                // SOXL ì£¼ì‹ ìˆ˜
                const soxlSharesCell = row.insertCell(3);
                soxlSharesCell.textContent = entry.soxlShares.toFixed(2);
                soxlSharesCell.style.backgroundColor = '#d4edda';
                soxlSharesCell.style.textAlign = 'right';
                
                // VXX ê°€ê²©
                const vxxPriceCell = row.insertCell(4);
                vxxPriceCell.textContent = `$${entry.vxxPrice.toFixed(2)}`;
                vxxPriceCell.style.backgroundColor = '#f8d7da';
                vxxPriceCell.style.textAlign = 'right';
                vxxPriceCell.style.fontWeight = '600';
                
                // VXX ì£¼ì‹ ìˆ˜
                const vxxSharesCell = row.insertCell(5);
                vxxSharesCell.textContent = entry.vxxShares.toFixed(2);
                vxxSharesCell.style.backgroundColor = '#f8d7da';
                vxxSharesCell.style.textAlign = 'right';
                
                // ì´ ê°€ì¹˜
                const totalValueCell = row.insertCell(6);
                totalValueCell.textContent = `$${entry.totalValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                totalValueCell.style.textAlign = 'right';
                totalValueCell.style.fontWeight = 'bold';
                totalValueCell.style.backgroundColor = '#e3f2fd';
                
                // SOXL ë¹„ìœ¨
                const soxlRatioCell = row.insertCell(7);
                soxlRatioCell.textContent = `${entry.soxlRatio}%`;
                soxlRatioCell.style.textAlign = 'center';
                soxlRatioCell.style.fontWeight = '600';
                soxlRatioCell.style.color = '#28a745';
                
                // VXX ë¹„ìœ¨
                const vxxRatioCell = row.insertCell(8);
                vxxRatioCell.textContent = `${entry.vxxRatio}%`;
                vxxRatioCell.style.textAlign = 'center';
                vxxRatioCell.style.fontWeight = '600';
                vxxRatioCell.style.color = '#dc3545';
                
                // ì›”ê°„ ìˆ˜ìµë¥ 
                const monthlyReturnCell = row.insertCell(9);
                const returnValue = entry.monthlyReturn;
                monthlyReturnCell.textContent = `${returnValue.toFixed(2)}%`;
                monthlyReturnCell.style.textAlign = 'right';
                monthlyReturnCell.style.fontWeight = '600';
                
                // ìˆ˜ìµë¥ ì— ë”°ë¥¸ ìƒ‰ìƒ ì„¤ì •
                if (returnValue > 0) {
                    monthlyReturnCell.style.color = '#28a745';
                } else if (returnValue < 0) {
                    monthlyReturnCell.style.color = '#dc3545';
                } else {
                    monthlyReturnCell.style.color = '#6c757d';
                }
            });
        }

        function updatePerformanceMetrics() {
            if (investmentHistory.length === 0) return;

            const firstEntry = investmentHistory[0];
            const lastEntry = investmentHistory[investmentHistory.length - 1];
            
            const totalPeriod = investmentHistory.length;
            const totalReturn = ((lastEntry.totalValue - firstEntry.totalValue) / firstEntry.totalValue) * 100;
            const annualReturn = (Math.pow(lastEntry.totalValue / firstEntry.totalValue, 12 / totalPeriod) - 1) * 100;
            
            // ìµœëŒ€ ë‚™í­ ê³„ì‚°
            let maxValue = firstEntry.totalValue;
            let maxDrawdown = 0;
            
            investmentHistory.forEach(entry => {
                if (entry.totalValue > maxValue) {
                    maxValue = entry.totalValue;
                }
                const drawdown = ((entry.totalValue - maxValue) / maxValue) * 100;
                if (drawdown < maxDrawdown) {
                    maxDrawdown = drawdown;
                }
            });

            document.getElementById('totalPeriod').textContent = `${totalPeriod}ê°œì›”`;
            document.getElementById('totalReturn').textContent = `${totalReturn.toFixed(2)}%`;
            document.getElementById('annualReturn').textContent = `${annualReturn.toFixed(2)}%`;
            document.getElementById('maxDrawdown').textContent = `${maxDrawdown.toFixed(2)}%`;
        }

        function updatePerformanceChart() {
            if (investmentHistory.length === 0) return;

            const ctx = document.getElementById('performanceChart').getContext('2d');
            
            if (performanceChart) {
                performanceChart.destroy();
            }

            const months = investmentHistory.map(entry => `${entry.year}ë…„ ${entry.month}ì›”`);
            const values = investmentHistory.map(entry => entry.totalValue);
            const returns = investmentHistory.map((entry, index) => {
                if (index === 0) return 0;
                return ((entry.totalValue - investmentHistory[index - 1].totalValue) / investmentHistory[index - 1].totalValue) * 100;
            });

            performanceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ ($)',
                            data: values,
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            yAxisID: 'y'
                        },
                        {
                            label: 'ì›”ê°„ ìˆ˜ìµë¥  (%)',
                            data: returns,
                            borderColor: '#00b894',
                            backgroundColor: 'rgba(0, 184, 148, 0.1)',
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'í¬íŠ¸í´ë¦¬ì˜¤ ì„±ê³¼ ì¶”ì´'
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ ($)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'ì›”ê°„ ìˆ˜ìµë¥  (%)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    }
                }
            });
        }

        function resetCalculator() {
            document.getElementById('soxlPrice').value = '';
            document.getElementById('soxlShares').value = '';
            document.getElementById('vxxPrice').value = '';
            document.getElementById('vxxShares').value = '';
            document.getElementById('results').style.display = 'none';
        }

        // ì´ˆê¸°í™”
        window.onload = function() {
            loadMonthData();
        };
    </script>
</body>
</html>
